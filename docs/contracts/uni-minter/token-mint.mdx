---
title: Overview
sidebar_position: 1
---
# UNIMinter

## Overview

The UNI token contract has a `mint` function, which is callable by the address defined as the `minter`. Since the token's deployment, Uniswap Governance has held the `minter` role. You can view the current `minter` [here](https://etherscan.io/address/0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984#readContract).

UNIMinter is designed to coordinate the minting and distribution of UNI tokens to one or more recipients when the contract has been granted UNI's `minter` role. Please note the original `UNI` mint mechanics are still enforced:

1. Mints can only be performed once every 365 days
2. Mints are capped at 2% of the total UNI supply, inclusive of the supply held by `address(0xdead)` (the recipient of UNI on `Firepit.release()`)

UNIMinter's `owner` (Uniswap Governance) will be able to:

* Designate multiple recipients of minted tokens, with varying allocations
* Remove and revoke allocations, with a delay
* Appoint a new minting contract, replacing the current implementation

Altruistic actors will be responsible for:

* Minting & distributing tokens to the designated recipients
* Revoking allocations, after the delay period, for recipients that are no longer eligible for minted tokens

## Splits

The UNIMinter contract implements a split-based allocation system that allows for proportional distribution of minted UNI tokens among multiple recipients.

### Split Structure

Each split is represented by a `Split` struct containing:

- **`recipient`**: The address that will receive minted UNI tokens
- **`units`**: The number of units allocated (out of 10,000 total units)
- **`revocationDelayDays`**: The number of days notice required for revocation
- **`pendingRevocationTime`**: Timestamp when revocation can be completed (0 if not pending)
- **`adjustedForRevocation`**: Whether the split has been adjusted for partial revocation

### Split Allocation Mechanics

- **Total Units**: The system uses 10,000 units to represent 100% of mintable tokens
- **Proportional Distribution**: When tokens are minted, they are distributed proportionally based on each recipient's split
- **Unallocated Units**: Any unallocated units result in reduced inflation, as only allocated units participate in minting
- **Maximum Allocation**: The sum of all granted units cannot exceed 10,000

### Granting Splits

The owner can grant splits to recipients using `grantSplit()`:

```solidity
function grantSplit(address _recipient, uint16 _amount, uint16 _revocationDelayDays)
```

- **`_recipient`**: Address to receive the allocation
- **`_unit`**: Number of units to allocate (0-10,000)
- **`_revocationDelayDays`**: Days of notice required before revocation can be completed

## Revocation Dynamics

The UNIMinter implements a revocation system that ensures fair treatment of recipients while allowing governance to adjust allocations over time.

### Revocation Process

The revocation process consists of two distinct phases:

1. **Initiation**: Owner calls `initiateRevokeSplit()` to start the revocation process
2. **Completion**: Anyone can call `revokeSplit()` after the delay period (defined in the `Split` struct) to complete the revocation

### What Happens Between Initiation and Completion

After `initiateRevokeSplit()` is called but before `revokeSplit()` can be executed:

- **Split remains active**: The recipient continues to receive their full allocation from any mints that occur during this period
- **Pending revocation timestamp is set**: The contract calculates when revocation can be completed (`block.timestamp + revocationDelayDays * 1 days`)
- **No immediate effect**: The split allocation remains unchanged until `revokeSplit()` is called
- **Anyone can complete**: Once the delay period expires, anyone can call `revokeSplit()` to finalize the revocation

### Revocation Timing Logic

The contract implements intelligent timing logic based on when `revokeSplit()` is called relative to the next mint:

#### Early Revocation (Before Next Mint)
If `revokeSplit()` is called at a point greater than 365 days since the last time the `mint()` function was called but before anyone calls the `mint()` function:
- The split is **entirely removed** from the system
- The recipient receives no tokens from the next mint
- Total splits are reduced immediately

#### Partial Revocation (During Next Mint Period)
If `revokeSplit()` is called after the next mint but before the subsequent mint:
- The split amount is **reduced proportionally** to the remaining time
- Example: If revocation occurs 90 days into a 365-day period, the recipient gets ~25% of their original allocation
- The split is marked as `adjustedForRevocation` to prevent double-adjustment

#### Invalid Revocation
If `revokeSplit()` is called too early (before the delay period expires):
- The transaction reverts with `InvalidRevocation` error
- The recipient continues to receive their full allocation

### Example Scenario

Let's walk through a concrete example:

1. **Day 0**: Governance grants 1000 units to Alice with a 30-day revocation delay
2. **Day 100**: Governance calls `initiateRevokeSplit()` for Alice's allocation
   - Alice's `pendingRevocationTime` is set to Day 130 (100 + 30 days)
   - The next mint is scheduled for Day 120
3. **Day 111**: Someone calls `revokeSplit()` for Alice
   - Because Alice's split is "active" until Day 130, after the Day 120 mint, her units are adjusted proportionally
   - (130 - 120) / 365 * 1000 = ~27 units
4. **Day 120**: Next mint occurs - Alice receives tokens based on her 27 units
5. **Day 130**: The delay period expires - anyone can now call `revokeSplit()` again
   - Alice is removed entirely from future mints


### Revocation Delay

Each unit allocation includes a configurable revocation delay:
- Set when units are granted via `grantSplit()`
- Provides notice period before revocation can be completed
- Ensures recipients have time to adjust to allocation changes

## Governance Controls

The UNIMinter contract implements several governance controls that allow the owner (Uniswap Governance) to manage the minting system effectively.

### Owner Permissions

The contract owner has exclusive control over:

#### Unit Management
- **`grantSplit()`**: Allocate new units to recipients
- **`initiateRevokeSplit()`**: Start the revocation process for existing units

#### Minter Role Management
- **`setMinter()`**: Transfer the UNI minter role to a new address
  - This is a critical operation that permanently transfers minting capability
  - Once transferred, this contract can no longer mint unless the role is transferred back

### Public Functions

Certain functions are callable by anyone to ensure the system operates fairly:

#### Minting
- **`mint()`**: Execute the annual mint and distribute tokens
  - Can be called by anyone once per year
  - Automatically distributes tokens proportionally to desiginated recipients in the `Splits` list
  - Respects the 2% annual inflation cap and 365-day minting period

#### Revocation Completion
- **`revokeSplit()`**: Complete or update split revocations
  - Can be called by anyone after the delay period
  - Implements the intelligent timing logic described above
  - Ensures the system remains fair and transparent

### Security Considerations

- **Ownership Transfer**: The contract inherits from `Owned`, allowing governance to transfer ownership if needed
- **Role Separation**: The minter role can be transferred independently of contract ownership
- **Delay Mechanisms**: Revocation delays prevent sudden, unpredictable changes to allocations
- **Proportional Adjustments**: Partial revocations ensure recipients receive fair compensation for their time in the system

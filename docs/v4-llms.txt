# Uniswap v4

- [v4 vs v3](https://docs.uniswap.org/contracts/v4/concepts/v4-vs-v3): While Uniswap v4's underlying concentrated liquidity is the same as Uniswap v3, there are some key differences in the architecture and accounting.
- [Flash Accounting](https://docs.uniswap.org/contracts/v4/concepts/flash-accounting): In previous versions of Uniswap, every time a swap was made - including multi-hop swap - tokens were transferred between Pool contracts for intermediate steps.
- [ERC-6909](https://docs.uniswap.org/contracts/v4/concepts/erc6909): Uniswap v4 uses ERC-6909 to further improve gas-efficiency on token claims and redemptions.
- [Hooks](https://docs.uniswap.org/contracts/v4/concepts/hooks): Uniswap v4 introduces Hooks, a system that allows developers to customize and extend the behavior of liquidity pools.
- [Subscribers](https://docs.uniswap.org/contracts/v4/concepts/subscribers): Subscribers, new in Uniswap v4, allow for liquidity-position owners to opt-in to a contract that receives _notifications_. The new design is intended to support _liquidity mining_, additional rewards given to in-range liquidity providers. Through notification logic, position owners do not need to risk their liquidity position and its underlying assets. In Uniswap v3, _liquidity mining_ was supported by fully transferring the liquidity position to an external contract; this old design would give the external contract full ownership and control of the liquidity position.
- [PoolManager](https://docs.uniswap.org/contracts/v4/concepts/PoolManager): In Uniswap v3, each liquidity pool was represented by a separate smart contract deployed through the Uniswapv3Factory contract. While this approach provided flexibility, it also led to increased gas costs for pool creation and multi-hop swaps.
- [Dynamic Fees](https://docs.uniswap.org/contracts/v4/concepts/dynamic-fees): Uniswap v4 introduces dynamic fees, allowing for flexible and responsive fee structures managed through hooks. This feature enables pools to adapt fees to changing market conditions, potentially improving liquidity provider profitability and overall market efficiency.
- [Integrated Routing with UniswapX](https://docs.uniswap.org/contracts/v4/concepts/integrated-routing-uniswap-x): The Uniswap Interface will be ramping up support for hooks in its standard routing system progressively over time. Hook builders looking to get immediate access to flow from the interface can do so by running a UniswapX filler for their hooked pools.
- [Deployments](https://docs.uniswap.org/contracts/v4/deployments): The Uniswap Protocol is made up of multiple contracts on many networks.
- [Unlock Callback & Deltas](https://docs.uniswap.org/contracts/v4/guides/unlock-callback): In order to have access to the liquidity inside the `PoolManager`, it needs to be _unlocked_ to begin with. After being unlocked, any number of operations can be executed, which at the end of must be _locked_ again. At this point, if there are any _non-zero deltas_, meaning the PoolManager is owed or owes tokens back to some address, the whole execution reverts. Otherwise, both parties have paid or received the right amount of tokens and the operations have successfully carried out.
- [Reading Pool State](https://docs.uniswap.org/contracts/v4/guides/read-pool-state): Unlike previous versions, v4 uses a different approach for storing and accessing pool data, which requires understanding the use of `StateLibrary` and `extsload`.
- [Custom Accounting](https://docs.uniswap.org/contracts/v4/guides/custom-accounting): These features are grouped together because they collectively represent the core of Uniswap v4’s customizability. They all relate to how pool state is managed and modified, working in tandem to allow developers to create highly tailored AMM experiences. From dynamic fee structures to unique bonding curves.
- [Swap routing](https://docs.uniswap.org/contracts/v4/guides/swap-routing): Uniswap v4 introduces a new architecture where all pools are managed by a single PoolManager contract. While the underlying architecture uses a callback system for swaps, developers can still use the Universal Router to execute swaps on v4 pools, just as you would for v2 or v3.
- [ERC-6909](https://docs.uniswap.org/contracts/v4/guides/ERC-6909): Uniswap v4 uses ERC-6909, a token standard that works alongside the protocol’s flash accounting system. This guide explains how ERC-6909 functions within v4, when to use mint versus burn operations, and how developers can implement them effectively.
- [Position Manager](https://docs.uniswap.org/contracts/v4/guides/position-manager): The Position Manager in v4 provides a streamlined way to manage liquidity positions through a command-based interface. Unlike previous versions where each operation required separate function calls, v4’s Position Manager uses a batched command pattern that allows multiple operations to be executed in a single transaction.
- [StateView](https://docs.uniswap.org/contracts/v4/guides/state-view): When building on **Uniswap v4**, you will often need to read pool state for both onchain and offchain use cases. Onchain contracts can directly invoke the **StateLibrary** to execute these reads during transactions, but offchain systems—such as frontends or analytics services—require a deployed contract with view functions. This is where **StateView** comes in.
- [Flash Accounting](https://docs.uniswap.org/contracts/v4/guides/flash-accounting): Flash accounting is v4’s mechanism for tracking token movements throughout a transaction. Unlike traditional token accounting which updates balances immediately after each operation, flash accounting accumulates changes (deltas) and settles them at the end of the transaction.
- [Access msg.sender Inside a Hook](https://docs.uniswap.org/contracts/v4/guides/accessing-msg.sender-using-hook): This is typically a router contract, such as a custom swap router or the Universal Router. The challenge is distinguishing between different routers and securely obtaining the original msg.sender.
- [Building Your First Hook](https://docs.uniswap.org/contracts/v4/guides/hooks/your-first-hook): Uniswap introduced the v4 of their protocol introducing several new concepts such as hooks, flash accounting, singleton architecture and more. The most interesting of these for developers is hooks, and that’s what we’ll be learning about today.
- [Hook Deployment](https://docs.uniswap.org/contracts/v4/guides/hooks/hook-deployment): As mentioned in Concept of Hooks, hook contracts indicate their implemented functions by __encoding its behavior in the address of the contract__. The `PoolManager` uses these permissions to determine which hook functions to call for a given pool.
- [Overview](https://docs.uniswap.org/contracts/v4/overview): Uniswap v4 inherits all of the capital efficiency gains of Uniswap v3, but provides flexibility via *hooks* and gas optimizations across the entire lifecycle.
- [Create Pool](https://docs.uniswap.org/contracts/v4/quickstart/create-pool): Creating a pool on Uniswap v4 is permissionless and enables the trading of an asset. Uniswap v4 is a popular destination for creating markets due to its:
- [Setup](https://docs.uniswap.org/contracts/v4/quickstart/manage-liquidity/setup-liquidity): For users looking to interact with the canonical Uniswap v4 `PositionManager`, _v4-periphery_ is a required dependency
- [Mint Position](https://docs.uniswap.org/contracts/v4/quickstart/manage-liquidity/mint-position): Similar to Uniswap v3, liquidity positions are minted as ERC-721 tokens and depend on a *periphery* contract. v4's `PositionManager` contract will facilitate liquidity management
- [Increase Liquidity](https://docs.uniswap.org/contracts/v4/quickstart/manage-liquidity/increase-liquidity): Please note that `PositionManager` is a command-based contract, where integrators will be encoding commands and their corresponding parameters.
- [Decrease Liquidity](https://docs.uniswap.org/contracts/v4/quickstart/manage-liquidity/decrease-liquidity): Please note that `PositionManager` is a command-based contract, where integrators will be encoding commands and their corresponding parameters.
- [Collect Fees](https://docs.uniswap.org/contracts/v4/quickstart/manage-liquidity/collect): See the setup guide
- [Burn Position](https://docs.uniswap.org/contracts/v4/quickstart/manage-liquidity/burn-liquidity): To liquidate a position, the _burn_ functionality can be invoked. The funds in the position will be withdrawn and all the information of the underlying token will be cleared. Burning the position is a cost effective way to exit as a liquidity provider.
- [Batch Modify](https://docs.uniswap.org/contracts/v4/quickstart/manage-liquidity/batch-liquidity): As seen in previous guides, `PositionManager` is a command-based contract. This design is conducive to batching complex liquidity operations. For example, developers can encode efficient logic to move liquidity between two positions on entirely different Pools.
- [Swap](https://docs.uniswap.org/contracts/v4/quickstart/swap): Although it's technically possible to interact directly with the PoolManager contract for swaps, this approach is not recommended due to its complexity and potential inefficiencies. Instead, the Universal Router is the preferred method, as it abstracts away these complexities. By using the Universal Router, developers and users can ensure a more straightforward, efficient, and standardized approach to executing swaps on v4 pools, aligning with best practices for Uniswap interactions.
- [Set Up Local Environment](https://docs.uniswap.org/contracts/v4/quickstart/hooks/setup): Before writing the hook let's first have a local environment properly configured e.g. deploying pool manager, utility routers and test tokens.
- [Swap Hooks](https://docs.uniswap.org/contracts/v4/quickstart/hooks/swap): Swaps are the most common interaction with the Uniswap protocol. When it comes to swap there are two hook functions available to customize and extend its behavior:
- [Liquidity Hooks](https://docs.uniswap.org/contracts/v4/quickstart/hooks/liquidity): This guide will walk through on an example of adding and removing liquidity. There are four hook functions available to customize and extend these behavior:
- [AsyncSwap Hooks](https://docs.uniswap.org/contracts/v4/quickstart/hooks/async-swap): One feature enabled by custom accounting is​​​​‌ AsyncSwap swap. This feature allows hook developers to replace the v4 (v3-style) swap logic.
- [Subscriber](https://docs.uniswap.org/contracts/v4/quickstart/subscriber): For developers looking to support custom _liquidity mining_, Subscriber contracts can be used to receive notifications about position modifications or transfers.
- [ERC6909](https://docs.uniswap.org/contracts/v4/reference/core/ERC6909): **Inherits:** IERC6909Claims
- [ERC6909Claims](https://docs.uniswap.org/contracts/v4/reference/core/ERC6909Claims): **Inherits:** ERC6909
- [Extsload](https://docs.uniswap.org/contracts/v4/reference/core/Extsload): **Inherits:** IExtsload
- [Exttload](https://docs.uniswap.org/contracts/v4/reference/core/Exttload): **Inherits:** IExttload
- [IPoolManager](https://docs.uniswap.org/contracts/v4/reference/core/IPoolManager): The `IPoolManager` interface defines the main methods for interacting with the Uniswap V4 pool manager contract. It exposes the core _swap lifecycle_ operations
- [NoDelegateCall](https://docs.uniswap.org/contracts/v4/reference/core/NoDelegateCall): Base contract that provides a modifier for preventing delegatecall to methods in a child contract
- [PoolManager](https://docs.uniswap.org/contracts/v4/reference/core/PoolManager): **Inherits:** IPoolManager, ProtocolFees, NoDelegateCall, ERC6909Claims, Extsload, Exttload
- [ProtocolFees](https://docs.uniswap.org/contracts/v4/reference/core/ProtocolFees): **Inherits:** IProtocolFees, Owned
- [IERC20Minimal](https://docs.uniswap.org/contracts/v4/reference/core/interfaces/IERC20Minimal): Contains a subset of the full ERC20 interface that is used in Uniswap V3
- [IERC6909Claims](https://docs.uniswap.org/contracts/v4/reference/core/interfaces/IERC6909Claims): Interface for claims over a contract balance, wrapped as a ERC6909
- [IExtsload](https://docs.uniswap.org/contracts/v4/reference/core/interfaces/IExtsload): Interface for functions to access any storage slot in a contract
- [IExttload](https://docs.uniswap.org/contracts/v4/reference/core/interfaces/IExttload): Interface for functions to access any transient storage slot in a contract
- [IHooks](https://docs.uniswap.org/contracts/v4/reference/core/interfaces/IHooks): V4 decides whether to invoke specific hooks by inspecting the least significant bits of the address that the hooks contract is deployed to. For example, a hooks contract deployed to address: 0x0000000000000000000000000000000000002400 has the lowest bits '10 0100 0000 0000' which would cause the 'before initialize' and 'after add liquidity' hooks to be used. See the Hooks library for the full spec.
- [IPoolManager](https://docs.uniswap.org/contracts/v4/reference/core/interfaces/IPoolManager): **Inherits:** IProtocolFees, IERC6909Claims, IExtsload, IExttload
- [IProtocolFees](https://docs.uniswap.org/contracts/v4/reference/core/interfaces/IProtocolFees): Interface for all protocol-fee related functions in the pool manager
- [IUnlockCallback](https://docs.uniswap.org/contracts/v4/reference/core/interfaces/IUnlockCallback): Interface for the callback executed when an address unlocks the pool manager
- [BitMath](https://docs.uniswap.org/contracts/v4/reference/core/libraries/BitMath): **Author:** Solady (https://github.com/Vectorized/solady/blob/8200a70e8dc2a77ecb074fc2e99a2a0d36547522/src/utils/LibBit.sol)
- [CurrencyDelta](https://docs.uniswap.org/contracts/v4/reference/core/libraries/CurrencyDelta): *this library implements the equivalent of a mapping, as transient storage can only be accessed in assembly*
- [CurrencyReserves](https://docs.uniswap.org/contracts/v4/reference/core/libraries/CurrencyReserves): Git Source - Generated with forge doc
- [CustomRevert](https://docs.uniswap.org/contracts/v4/reference/core/libraries/CustomRevert): Contains functions for reverting with custom errors with different argument types efficiently
- [FixedPoint128](https://docs.uniswap.org/contracts/v4/reference/core/libraries/FixedPoint128): A library for handling binary fixed point numbers, see https://en.wikipedia.org/wiki/Q_(number_format)
- [FixedPoint96](https://docs.uniswap.org/contracts/v4/reference/core/libraries/FixedPoint96): A library for handling binary fixed point numbers, see https://en.wikipedia.org/wiki/Q_(number_format)
- [FullMath](https://docs.uniswap.org/contracts/v4/reference/core/libraries/FullMath): Facilitates multiplication and division that can have overflow of an intermediate value without any loss of precision
- [Hooks](https://docs.uniswap.org/contracts/v4/reference/core/libraries/Hooks): V4 decides whether to invoke specific hooks by inspecting the least significant bits of the address that the hooks contract is deployed to. For example, a hooks contract deployed to address: 0x0000000000000000000000000000000000002400 has the lowest bits '10 0100 0000 0000' which would cause the 'before initialize' and 'after add liquidity' hooks to be used.
- [LPFeeLibrary](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary): Library of helper functions for a pools LP fee
- [LiquidityMath](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LiquidityMath): Add a signed liquidity delta to liquidity and revert if it overflows or underflows
- [Lock](https://docs.uniswap.org/contracts/v4/reference/core/libraries/Lock): This is a temporary library that allows us to use transient storage (tstore/tload) TODO: This library can be deleted when we have the transient keyword support in solidity.
- [NonzeroDeltaCount](https://docs.uniswap.org/contracts/v4/reference/core/libraries/NonzeroDeltaCount): This is a temporary library that allows us to use transient storage (tstore/tload) for the nonzero delta count. TODO: This library can be deleted when we have the transient keyword support in solidity.
- [ParseBytes](https://docs.uniswap.org/contracts/v4/reference/core/libraries/ParseBytes): Parses bytes returned from hooks and the byte selector used to check return selectors from hooks.
- [Pool](https://docs.uniswap.org/contracts/v4/reference/core/libraries/Pool): a library with all actions that can be performed on a pool
- [Position](https://docs.uniswap.org/contracts/v4/reference/core/libraries/Position): Positions represent an owner address' liquidity between a lower and upper tick boundary
- [ProtocolFeeLibrary](https://docs.uniswap.org/contracts/v4/reference/core/libraries/ProtocolFeeLibrary): library of functions related to protocol fees
- [SafeCast](https://docs.uniswap.org/contracts/v4/reference/core/libraries/SafeCast): Contains methods for safely casting between types
- [SqrtPriceMath](https://docs.uniswap.org/contracts/v4/reference/core/libraries/SqrtPriceMath): Contains the math that uses square root of price as a Q64.96 and liquidity to compute deltas
- [StateLibrary](https://docs.uniswap.org/contracts/v4/reference/core/libraries/StateLibrary): A helper library to provide state getters that use extsload
- [SwapMath](https://docs.uniswap.org/contracts/v4/reference/core/libraries/SwapMath): Contains methods for computing the result of a swap within a single tick price range, i.e., a single tick.
- [TickBitmap](https://docs.uniswap.org/contracts/v4/reference/core/libraries/TickBitmap): Stores a packed mapping of tick index to its initialized state
- [TickMath](https://docs.uniswap.org/contracts/v4/reference/core/libraries/TickMath): Computes sqrt price for ticks of size 1.0001, i.e. sqrt(1.0001^tick) as fixed point Q64.96 numbers. Supports prices between 2**-128 and 2**128
- [TransientStateLibrary](https://docs.uniswap.org/contracts/v4/reference/core/libraries/TransientStateLibrary): A helper library to provide state getters that use exttload
- [UnsafeMath](https://docs.uniswap.org/contracts/v4/reference/core/libraries/UnsafeMath): Contains methods that perform common math functions but do not do any overflow or underflow checks
- [LiquidityAmounts](https://docs.uniswap.org/contracts/v4/reference/core/libraries/liquidity-amounts): The `LiquidityAmounts` library provides functions for computing liquidity amounts from token amounts and prices in Uniswap V4.
- [TransientStateLibrary](https://docs.uniswap.org/contracts/v4/reference/core/libraries/transient-state-library): The `TransientStateLibrary` is a crucial component of Uniswap V4, providing utility functions for managing transient state in the PoolManager contract. This library handles operations related to reserves, delta counts, and locking state, which are essential for the efficient and secure operation of the Uniswap V4 protocol.
- [Actions](https://docs.uniswap.org/contracts/v4/reference/core/test/ActionsRouter): **Inherits:** IUnlockCallback, Test
- [BaseTestHooks](https://docs.uniswap.org/contracts/v4/reference/core/test/BaseTestHooks): **Inherits:** IHooks
- [CurrencyTest](https://docs.uniswap.org/contracts/v4/reference/core/test/CurrencyTest): Git Source - Generated with forge doc
- [CustomCurveHook](https://docs.uniswap.org/contracts/v4/reference/core/test/CustomCurveHook): **Inherits:** BaseTestHooks
- [DeltaReturningHook](https://docs.uniswap.org/contracts/v4/reference/core/test/DeltaReturningHook): **Inherits:** BaseTestHooks
- [DynamicFeesTestHook](https://docs.uniswap.org/contracts/v4/reference/core/test/DynamicFeesTestHook): **Inherits:** BaseTestHooks
- [DynamicReturnFeeTestHook](https://docs.uniswap.org/contracts/v4/reference/core/test/DynamicReturnFeeTestHook): **Inherits:** BaseTestHooks
- [EmptyRevertContract](https://docs.uniswap.org/contracts/v4/reference/core/test/EmptyRevertContract): Git Source - Generated with forge doc
- [EmptyTestHooks](https://docs.uniswap.org/contracts/v4/reference/core/test/EmptyTestHooks): **Inherits:** IHooks
- [FeeTakingHook](https://docs.uniswap.org/contracts/v4/reference/core/test/FeeTakingHook): **Inherits:** BaseTestHooks
- [Fuzzers](https://docs.uniswap.org/contracts/v4/reference/core/test/Fuzzers): **Inherits:** StdUtils
- [HooksTest](https://docs.uniswap.org/contracts/v4/reference/core/test/HooksTest): Git Source - Generated with forge doc
- [LPFeeTakingHook](https://docs.uniswap.org/contracts/v4/reference/core/test/LPFeeTakingHook): **Inherits:** BaseTestHooks
- [LiquidityMathTest](https://docs.uniswap.org/contracts/v4/reference/core/test/LiquidityMathTest): Git Source - Generated with forge doc
- [MockContract](https://docs.uniswap.org/contracts/v4/reference/core/test/MockContract): **Inherits:** Proxy
- [MockERC6909Claims](https://docs.uniswap.org/contracts/v4/reference/core/test/MockERC6909Claims): **Inherits:** ERC6909Claims
- [MockHooks](https://docs.uniswap.org/contracts/v4/reference/core/test/MockHooks): **Inherits:** IHooks
- [NativeERC20](https://docs.uniswap.org/contracts/v4/reference/core/test/NativeERC20): **Inherits:** Test
- [NoDelegateCallTest](https://docs.uniswap.org/contracts/v4/reference/core/test/NoDelegateCallTest): **Inherits:** NoDelegateCall
- [PoolClaimsTest](https://docs.uniswap.org/contracts/v4/reference/core/test/PoolClaimsTest): **Inherits:** PoolTestBase
- [PoolDonateTest](https://docs.uniswap.org/contracts/v4/reference/core/test/PoolDonateTest): **Inherits:** PoolTestBase
- [PoolEmptyUnlockTest](https://docs.uniswap.org/contracts/v4/reference/core/test/PoolEmptyUnlockTest): **Inherits:** IUnlockCallback
- [PoolModifyLiquidityTest](https://docs.uniswap.org/contracts/v4/reference/core/test/PoolModifyLiquidityTest): **Inherits:** PoolTestBase
- [PoolModifyLiquidityTestNoChecks](https://docs.uniswap.org/contracts/v4/reference/core/test/PoolModifyLiquidityTestNoChecks): **Inherits:** PoolTestBase
- [Action](https://docs.uniswap.org/contracts/v4/reference/core/test/PoolNestedActionsTest): **Inherits:** Test, IUnlockCallback
- [PoolSwapTest](https://docs.uniswap.org/contracts/v4/reference/core/test/PoolSwapTest): **Inherits:** PoolTestBase
- [PoolTakeTest](https://docs.uniswap.org/contracts/v4/reference/core/test/PoolTakeTest): **Inherits:** PoolTestBase
- [PoolTestBase](https://docs.uniswap.org/contracts/v4/reference/core/test/PoolTestBase): **Inherits:** IUnlockCallback
- [ProtocolFeesImplementation](https://docs.uniswap.org/contracts/v4/reference/core/test/ProtocolFeesImplementation): **Inherits:** ProtocolFees
- [ProxyPoolManager](https://docs.uniswap.org/contracts/v4/reference/core/test/ProxyPoolManager): **Inherits:** IPoolManager, ProtocolFees, NoDelegateCall, ERC6909Claims, Extsload, Exttload
- [SkipCallsTestHook](https://docs.uniswap.org/contracts/v4/reference/core/test/SkipCallsTestHook): **Inherits:** BaseTestHooks, Test
- [SqrtPriceMathEchidnaTest](https://docs.uniswap.org/contracts/v4/reference/core/test/SqrtPriceMathEchidnaTest): Git Source - Generated with forge doc
- [SwapRouterNoChecks](https://docs.uniswap.org/contracts/v4/reference/core/test/SwapRouterNoChecks): **Inherits:** PoolTestBase
- [TestERC20](https://docs.uniswap.org/contracts/v4/reference/core/test/TestERC20): **Inherits:** IERC20Minimal
- [TestInvalidERC20](https://docs.uniswap.org/contracts/v4/reference/core/test/TestInvalidERC20): **Inherits:** IERC20Minimal
- [TickMathEchidnaTest](https://docs.uniswap.org/contracts/v4/reference/core/test/TickMathEchidnaTest): Git Source - Generated with forge doc
- [TickMathTest](https://docs.uniswap.org/contracts/v4/reference/core/test/TickMathTest): Git Source - Generated with forge doc
- [TickOverflowSafetyEchidnaTest](https://docs.uniswap.org/contracts/v4/reference/core/test/TickOverflowSafetyEchidnaTest): Git Source - Generated with forge doc
- [BalanceDelta](https://docs.uniswap.org/contracts/v4/reference/core/types/BalanceDelta): *Two `int128` values packed into a single `int256` where the upper 128 bits represent the amount0 and the lower 128 bits represent the amount1.*
- [BeforeSwapDelta](https://docs.uniswap.org/contracts/v4/reference/core/types/BeforeSwapDelta): Library for getting the specified and unspecified deltas from the BeforeSwapDelta type
- [Currency](https://docs.uniswap.org/contracts/v4/reference/core/types/Currency): *This library allows for transferring and holding native tokens and ERC20 tokens*
- [PoolId](https://docs.uniswap.org/contracts/v4/reference/core/types/PoolId): Library for computing the ID of a pool
- [PoolKey](https://docs.uniswap.org/contracts/v4/reference/core/types/PoolKey): Returns the key for identifying a pool
- [Slot0](https://docs.uniswap.org/contracts/v4/reference/core/types/Slot0): *Slot0 is a packed version of solidity structure. Using the packaged version saves gas by not storing the structure fields in memory slots. Layout: 24 bits empty | 24 bits lpFee | 12 bits protocolFee 1->0 | 12 bits protocolFee 0->1 | 24 bits tick | 160 bits sqrtPriceX96 Fields in the direction from the least significant bit: The current price uint160 sqrtPriceX96; The current tick int24 tick; Protocol fee, expressed in hundredths of a bip, upper 12 bits are for 1->0, and the lower 12 are for 0->1 the maximum is 1000 - meaning the maximum protocol fee is 0.1% the protocolFee is taken from the input first, then the lpFee is taken from the remaining input uint24 protocolFee; The current LP fee of the pool. If the pool is dynamic, this does not include the dynamic fee flag. uint24 lpFee;*
- [BalanceDelta Guide](https://docs.uniswap.org/contracts/v4/reference/core/types/balancedelta-guide): `BalanceDelta` is a type used in Uniswap V4 to represent the balance changes of two tokens (token0 and token1). It tightly packs the two values in a single 256 bits. It is designed to efficiently store and manipulate these balance deltas, with the upper 128 bits representing the change in token0 (`amount0`) and the lower 128 bits representing the change in token1 (`amount1`).
- [BeforeSwapDelta Guide](https://docs.uniswap.org/contracts/v4/reference/core/types/beforeswapdelta-guide): `BeforeSwapDelta` is a custom type used in Uniswap V4 hook contracts to represent balance changes during swap operations. It is specifically designed to handle the return value of the `beforeSwap` hook and to be compatible with the `afterSwap` hook.
- [Currency Guide](https://docs.uniswap.org/contracts/v4/reference/core/types/currency-guide): `Currency` is a custom type that represents either native currency (ETH) or ERC20 tokens.
- [PoolKey Guide](https://docs.uniswap.org/contracts/v4/reference/core/types/poolkey-guide): `PoolKey` is a crucial struct in Uniswap V4 that uniquely identifies a liquidity pool. It encapsulates all the essential parameters that define a pool's characteristics.
- [Custom Error Selectors](https://docs.uniswap.org/contracts/v4/reference/errors/errors): | Error Selector | Hex Value | |-----------------------------------------------------|--------------| | `IPoolManager.CurrencyNotSettled.selector` | `0x5212cba1` | | `IPoolManager.PoolNotInitialized.selector` | `0x486aa307` | | `IPoolManager.AlreadyUnlocked.selector` | `0x5090d6c6` | | `IPoolManager.ManagerLocked.selector` | `0x54e3ca0d` | | `IPoolManager.TickSpacingTooLarge.selector` | `0xb02b5dc2` | | `IPoolManager.TickSpacingTooSmall.selector` | `0x16fe7696` | | `IPoolManager.CurrenciesOutOfOrderOrEqual.selector` | `0xeaa6c6eb` | | `IPoolManager.UnauthorizedDynamicLPFeeUpdate.selector` | `0x30d21641` | | `IPoolManager.SwapAmountCannotBeZero.selector` | `0xbe8b8507` | | `IPoolManager.NonZeroNativeValue.selector` | `0x19d245cf` |
- [PositionDescriptor](https://docs.uniswap.org/contracts/v4/reference/periphery/PositionDescriptor): **Inherits:** IPositionDescriptor
- [PositionManager](https://docs.uniswap.org/contracts/v4/reference/periphery/PositionManager): **Inherits:** IPositionManager, ERC721Permit_v4, PoolInitializer_v4, Multicall_v4, DeltaResolver, ReentrancyLock, BaseActionsRouter, Notifier, Permit2Forwarder, NativeWrapper
- [UniswapV4DeployerCompetition](https://docs.uniswap.org/contracts/v4/reference/periphery/UniswapV4DeployerCompetition): **Inherits:** IUniswapV4DeployerCompetition
- [V4Router](https://docs.uniswap.org/contracts/v4/reference/periphery/V4Router): **Inherits:** IV4Router, BaseActionsRouter, DeltaResolver
- [BaseActionsRouter](https://docs.uniswap.org/contracts/v4/reference/periphery/base/BaseActionsRouter): **Inherits:** SafeCallback
- [BaseV4Quoter](https://docs.uniswap.org/contracts/v4/reference/periphery/base/BaseV4Quoter): **Inherits:** SafeCallback
- [DeltaResolver](https://docs.uniswap.org/contracts/v4/reference/periphery/base/DeltaResolver): **Inherits:** ImmutableState
- [EIP712_v4](https://docs.uniswap.org/contracts/v4/reference/periphery/base/EIP712_v4): **Inherits:** IEIP712_v4
- [ERC721Permit_v4](https://docs.uniswap.org/contracts/v4/reference/periphery/base/ERC721Permit_v4): **Inherits:** ERC721, IERC721Permit_v4, EIP712_v4, UnorderedNonce
- [ImmutableState](https://docs.uniswap.org/contracts/v4/reference/periphery/base/ImmutableState): **Inherits:** IImmutableState
- [Multicall_v4](https://docs.uniswap.org/contracts/v4/reference/periphery/base/Multicall_v4): **Inherits:** IMulticall_v4
- [NativeWrapper](https://docs.uniswap.org/contracts/v4/reference/periphery/base/NativeWrapper): **Inherits:** ImmutableState
- [Notifier](https://docs.uniswap.org/contracts/v4/reference/periphery/base/Notifier): **Inherits:** INotifier
- [Permit2Forwarder](https://docs.uniswap.org/contracts/v4/reference/periphery/base/Permit2Forwarder): **Inherits:** IPermit2Forwarder
- [PoolInitializer_v4](https://docs.uniswap.org/contracts/v4/reference/periphery/base/PoolInitializer_v4): **Inherits:** ImmutableState, IPoolInitializer_v4
- [ReentrancyLock](https://docs.uniswap.org/contracts/v4/reference/periphery/base/ReentrancyLock): A transient reentrancy lock, that stores the caller's address as the lock
- [SafeCallback](https://docs.uniswap.org/contracts/v4/reference/periphery/base/SafeCallback): **Inherits:** ImmutableState, IUnlockCallback
- [UnorderedNonce](https://docs.uniswap.org/contracts/v4/reference/periphery/base/UnorderedNonce): **Inherits:** IUnorderedNonce
- [IEIP712_v4](https://docs.uniswap.org/contracts/v4/reference/periphery/interfaces/IEIP712_v4): Interface for the EIP712 contract
- [IERC721Permit_v4](https://docs.uniswap.org/contracts/v4/reference/periphery/interfaces/IERC721Permit_v4): Interface for the ERC721Permit_v4 contract
- [IImmutableState](https://docs.uniswap.org/contracts/v4/reference/periphery/interfaces/IImmutableState): Interface for the ImmutableState contract
- [IMulticall_v4](https://docs.uniswap.org/contracts/v4/reference/periphery/interfaces/IMulticall_v4): Interface for the Multicall_v4 contract
- [INotifier](https://docs.uniswap.org/contracts/v4/reference/periphery/interfaces/INotifier): Interface for the Notifier contract
- [IPermit2Forwarder](https://docs.uniswap.org/contracts/v4/reference/periphery/interfaces/IPermit2Forwarder): Interface for the Permit2Forwarder contract
- [IPoolInitializer_v4](https://docs.uniswap.org/contracts/v4/reference/periphery/interfaces/IPoolInitializer_v4): Interface for the PoolInitializer_v4 contract
- [IPositionDescriptor](https://docs.uniswap.org/contracts/v4/reference/periphery/interfaces/IPositionDescriptor): Interface for the PositionDescriptor contract
- [IPositionManager](https://docs.uniswap.org/contracts/v4/reference/periphery/interfaces/IPositionManager): **Inherits:** INotifier, IImmutableState, IERC721Permit_v4, IEIP712_v4, IMulticall_v4, IPoolInitializer_v4, IUnorderedNonce, IPermit2Forwarder
- [IStateView](https://docs.uniswap.org/contracts/v4/reference/periphery/interfaces/IStateView): **Inherits:** IImmutableState
- [ISubscriber](https://docs.uniswap.org/contracts/v4/reference/periphery/interfaces/ISubscriber): Interface that a Subscriber contract should implement to receive updates from the v4 position manager
- [IUniswapV4DeployerCompetition](https://docs.uniswap.org/contracts/v4/reference/periphery/interfaces/IUniswapV4DeployerCompetition): Interface for the UniswapV4DeployerCompetition contract
- [IUnorderedNonce](https://docs.uniswap.org/contracts/v4/reference/periphery/interfaces/IUnorderedNonce): Interface for the UnorderedNonce contract
- [IV4Quoter](https://docs.uniswap.org/contracts/v4/reference/periphery/interfaces/IV4Quoter): **Inherits:** IImmutableState
- [IV4Router](https://docs.uniswap.org/contracts/v4/reference/periphery/interfaces/IV4Router): **Inherits:** IImmutableState
- [IWETH9](https://docs.uniswap.org/contracts/v4/reference/periphery/interfaces/IWETH9): **Inherits:** IERC20
- [StateView](https://docs.uniswap.org/contracts/v4/reference/periphery/lens/StateView): **Inherits:** ImmutableState, IStateView
- [V4Quoter](https://docs.uniswap.org/contracts/v4/reference/periphery/lens/V4Quoter): **Inherits:** IV4Quoter, BaseV4Quoter
- [ActionConstants](https://docs.uniswap.org/contracts/v4/reference/periphery/libraries/ActionConstants): Common constants used in actions
- [Actions](https://docs.uniswap.org/contracts/v4/reference/periphery/libraries/Actions): Library to define different pool actions.
- [AddressStringUtil](https://docs.uniswap.org/contracts/v4/reference/periphery/libraries/AddressStringUtil): provides utility functions for converting addresses to strings
- [BipsLibrary](https://docs.uniswap.org/contracts/v4/reference/periphery/libraries/BipsLibrary): |Name|Type|Description| |----|----|-----------| |`amount`|`uint256`|The total amount to calculate a percentage of| |`bips`|`uint256`|The percentage to calculate, in bips|
- [CalldataDecoder](https://docs.uniswap.org/contracts/v4/reference/periphery/libraries/CalldataDecoder): *no sane abi encoding will pass in an offset or length greater than type(uint32).max (note that this does deviate from standard solidity behavior and offsets/lengths will be interpreted as mod type(uint32).max which will only impact malicious/buggy callers)*
- [CurrencyRatioSortOrder](https://docs.uniswap.org/contracts/v4/reference/periphery/libraries/CurrencyRatioSortOrder): Provides constants for sorting currencies when displaying price ratios Currencies given larger values will be in the numerator of the price ratio
- [Descriptor](https://docs.uniswap.org/contracts/v4/reference/periphery/libraries/Descriptor): Describes NFT token positions
- [ERC721PermitHash](https://docs.uniswap.org/contracts/v4/reference/periphery/libraries/ERC721PermitHash): Hashes the data that will be signed for IERC721Permit_v4.permit()
- [HexStrings](https://docs.uniswap.org/contracts/v4/reference/periphery/libraries/HexStrings): Provides function for converting numbers to hexadecimal strings
- [LiquidityAmounts](https://docs.uniswap.org/contracts/v4/reference/periphery/libraries/LiquidityAmounts): Provides functions for computing liquidity amounts from token amounts and prices
- [Locker](https://docs.uniswap.org/contracts/v4/reference/periphery/libraries/Locker): This is a temporary library that allows us to use transient storage (tstore/tload) TODO: This library can be deleted when we have the transient keyword support in solidity.
- [PathKey](https://docs.uniswap.org/contracts/v4/reference/periphery/libraries/PathKey): Functions for working with PathKeys
- [PositionConfig](https://docs.uniswap.org/contracts/v4/reference/periphery/libraries/PositionConfig): Library to calculate the PositionConfigId from the PositionConfig struct
- [PositionConfigId](https://docs.uniswap.org/contracts/v4/reference/periphery/libraries/PositionConfigId): A configId is set per tokenId The lower 255 bits are used to store the truncated hash of the corresponding PositionConfig The upper bit is used to signal if the tokenId has a subscriber
- [PositionInfo](https://docs.uniswap.org/contracts/v4/reference/periphery/libraries/PositionInfoLibrary): *PositionInfo is a packed version of solidity structure. Using the packaged version saves gas and memory by not storing the structure fields in memory slots. Layout: 200 bits poolId | 24 bits tickUpper | 24 bits tickLower | 8 bits hasSubscriber Fields in the direction from the least significant bit: A flag to know if the tokenId is subscribed to an address uint8 hasSubscriber; The tickUpper of the position int24 tickUpper; The tickLower of the position int24 tickLower; The truncated poolId. Truncates a bytes32 value so the most signifcant (highest) 200 bits are used. bytes25 poolId; Note: If more bits are needed, hasSubscriber can be a single bit.*
- [QuoterRevert](https://docs.uniswap.org/contracts/v4/reference/periphery/libraries/QuoterRevert): reverts, where the revert data is the provided bytes
- [SVG](https://docs.uniswap.org/contracts/v4/reference/periphery/libraries/SVG): Provides a function for generating an SVG associated with a Uniswap NFT
- [SafeCurrencyMetadata](https://docs.uniswap.org/contracts/v4/reference/periphery/libraries/SafeCurrencyMetadata): can produce symbols and decimals from inconsistent or absent ERC20 implementations
- [SlippageCheck](https://docs.uniswap.org/contracts/v4/reference/periphery/libraries/SlippageCheck): a library for checking if a delta exceeds a maximum ceiling or fails to meet a minimum floor
- [VanityAddressLib](https://docs.uniswap.org/contracts/v4/reference/periphery/libraries/VanityAddressLib): A library to score addresses based on their vanity
- [BaseHook](https://docs.uniswap.org/contracts/v4/reference/periphery/utils/BaseHook): **Inherits:** IHooks, ImmutableState
